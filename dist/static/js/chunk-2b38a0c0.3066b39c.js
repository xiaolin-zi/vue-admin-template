(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b38a0c0"],{a15b:function(e,t,n){"use strict";var s=n("23e7"),o=n("44ad"),a=n("fc6a"),r=n("a640"),i=[].join,c=o!=Object,u=r("join",",");s({target:"Array",proto:!0,forced:c||!u},{join:function(e){return i.call(a(this),void 0===e?",":e)}})},a4fa:function(e,t,n){"use strict";var s=n("b775"),o="/admin/acl/permission";t["a"]={getNestedTreeList:function(){return Object(s["a"])({url:"".concat(o),method:"get"})},removeById:function(e){return Object(s["a"])({url:"".concat(o,"/remove/").concat(e),method:"delete"})},saveLevelOne:function(e){return Object(s["a"])({url:"".concat(o,"/save"),method:"post",data:e})},update:function(e){return Object(s["a"])({url:"".concat(o,"/update"),method:"put",data:e})},toAssign:function(e){return Object(s["a"])({url:"".concat(o,"/getPermission/").concat(e),method:"get"})},doAssign:function(e,t){return Object(s["a"])({url:"".concat(o,"/setPermission"),method:"post",params:{roleId:e,permissionIds:t}})}}},e9c4:function(e,t,n){var s=n("23e7"),o=n("d066"),a=n("d039"),r=o("JSON","stringify"),i=/[\uD800-\uDFFF]/g,c=/^[\uD800-\uDBFF]$/,u=/^[\uDC00-\uDFFF]$/,d=function(e,t,n){var s=n.charAt(t-1),o=n.charAt(t+1);return c.test(e)&&!u.test(o)||u.test(e)&&!c.test(s)?"\\u"+e.charCodeAt(0).toString(16):e},l=a((function(){return'"\\udf06\\ud834"'!==r("\udf06\ud834")||'"\\udead"'!==r("\udead")}));r&&s({target:"JSON",stat:!0,forced:l},{stringify:function(e,t,n){var s=r.apply(null,arguments);return"string"==typeof s?s.replace(i,d):s}})},ecef:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{margin:"20px 20px"}},[n("el-tree",{ref:"tree",attrs:{data:e.data,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps}}),n("el-button",{attrs:{disabled:e.saveBtnDisabled,type:"primary"},on:{click:e.save}},[e._v("保存")])],1)},o=[],a=(n("b64b"),n("e9c4"),n("a15b"),n("a4fa")),r={data:function(){return{saveBtnDisabled:!1,data:[],defaultProps:{children:"children",label:"permissionName"},roleId:""}},watch:{$route:function(e,t){this.init()}},created:function(){this.init()},methods:{init:function(){this.$route.params&&this.$route.params.id&&(this.roleId=this.$route.params.id,this.fetchDataById(this.roleId))},fetchDataById:function(e){var t=this;a["a"].toAssign(e).then((function(e){t.data=e.data.children,console.log("获取到的数据:"),console.log(t.data);var n=JSON.parse(JSON.stringify(t.data));console.log("jsonList:"),console.log(n);var s=[];t.getJsonToList(s,n[0]["children"]),console.log("最终集合"),console.log(s),t.setCheckedKeys(s)}))},getJsonToList:function(e,t){for(var n=0;n<t.length;n++)1==t[n]["select"]&&4==t[n]["level"]&&e.push(t[n]["id"]),null!=t[n]["children"]&&this.getJsonToList(e,t[n]["children"])},getCheckedNodes:function(){console.log(this.$refs.tree.getCheckedNodes())},getCheckedKeys:function(){console.log(this.$refs.tree.getCheckedKeys())},setCheckedKeys:function(e){this.$refs.tree.setCheckedKeys(e)},save:function(){var e=this;this.saveBtnDisabled=!0;var t=this.$refs.tree.getCheckedKeys().join(",");console.log("ids:"+t),a["a"].doAssign(this.roleId,t).then((function(t){t.success&&(e.$message({type:"success",message:"保存成功"}),e.$router.push({path:"/acl/role/list"}))}))}}},i=r,c=n("2877"),u=Object(c["a"])(i,s,o,!1,null,null,null);t["default"]=u.exports}}]);
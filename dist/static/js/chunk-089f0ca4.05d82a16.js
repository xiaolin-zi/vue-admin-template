(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-089f0ca4"],{"3c25":function(e,i,t){"use strict";t.r(i);var s=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"app-container"},[t("el-table",{ref:"menuTree",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.menuList,"row-key":"id",border:"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[t("el-table-column",{attrs:{prop:"permissionName",label:"名称",sortable:"",width:"180"}}),t("el-table-column",{attrs:{prop:"path",label:"访问路径",sortable:"",width:"180"}}),t("el-table-column",{attrs:{prop:"permissionCode",label:"权限值"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){return[1==i.row.level||2==i.row.level?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){e.dialogFormVisible=!0,e.dialogFormValue="添加菜单",e.menu.pid=i.row.id}}},[e._v("添加菜单 ")]):e._e(),3==i.row.level?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){e.dialogPermissionVisible=!0,e.permission.pid=i.row.id}}},[e._v("添加功能 ")]):e._e(),4==i.row.level?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){e.addFun="修改功能",e.updateFunction(i.row)}}},[e._v("修改功能 ")]):e._e(),4!=i.row.level?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){e.dialogFormValue="修改菜单",e.getById(i.row)}}},[e._v("修改 ")]):e._e(),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.remove(i.row)}}},[e._v("删除 ")])]}}])})],1),t("el-dialog",{attrs:{visible:e.dialogFormVisible,title:e.dialogFormValue},on:{"update:visible":function(i){e.dialogFormVisible=i}}},[t("el-form",{ref:"menu",attrs:{model:e.menu,rules:e.menuValidateRules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"菜单名称",prop:"permissionName"}},[t("el-input",{model:{value:e.menu.permissionName,callback:function(i){e.$set(e.menu,"permissionName",i)},expression:"menu.permissionName"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(i){return e.restData()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(i){return e.append()}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{visible:e.dialogPermissionVisible,title:e.addFun},on:{"update:visible":function(i){e.dialogPermissionVisible=i}}},[t("el-form",{ref:"permission",attrs:{model:e.permission,rules:e.permissionValidateRules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"功能名称",prop:"permissionName"}},[t("el-input",{model:{value:e.permission.permissionName,callback:function(i){e.$set(e.permission,"permissionName",i)},expression:"permission.permissionName"}})],1),t("el-form-item",{attrs:{label:"访问路径",prop:"path"}},[t("el-input",{model:{value:e.permission.path,callback:function(i){e.$set(e.permission,"path",i)},expression:"permission.path"}})],1),t("el-form-item",{attrs:{label:"功能权限值",prop:"permissionCode"}},[t("el-input",{model:{value:e.permission.permissionCode,callback:function(i){e.$set(e.permission,"permissionCode",i)},expression:"permission.permissionCode"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(i){return e.restData()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(i){return e.appendPermission()}}},[e._v("确 定")])],1)],1)],1)},n=[],o=t("5530"),a=t("a4fa"),r={permissionName:"",pid:0,type:"1"},l={permissionCode:"",type:"2",permissionName:"",path:"",pid:0},m={data:function(){return{filterText:"",menuList:[],defaultProps:{children:"children",label:"permissionName"},dialogFormValue:"修改菜单",addFun:"添加功能",dialogFormVisible:!1,dialogPermissionVisible:!1,menu:r,permission:l,menuValidateRules:{permissionName:[{required:!0,trigger:"blur",message:"菜单名必须输入"}]},permissionValidateRules:{permissionName:[{required:!0,trigger:"blur",message:"功能名称必须输入"}],path:[{required:!0,trigger:"blur",message:"访问路径必须输入"}],permissionCode:[{required:!0,trigger:"blur",message:"功能权限值必须输入"}]}}},created:function(){this.fetchNodeList()},methods:{fetchNodeList:function(){var e=this;a["a"].getNestedTreeList().then((function(i){!0===i.success&&(e.menuList=i.data.permissionList,console.log(e.menuList))}))},remove:function(e){var i=this;console.log(e),this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return a["a"].removeById(e.id)})).then((function(){i.fetchNodeList(),i.$message({type:"success",message:"删除成功!"})})).catch((function(e){"cancel"===e?i.$message({type:"info",message:"已取消删除"}):i.$message({type:"error",message:"删除失败"})}))},appendPermission:function(){var e=this;this.$refs.permission.validate((function(i){i&&(e.permission.id?e.update(e.permission):a["a"].saveLevelOne(e.permission).then((function(i){e.dialogPermissionVisible=!1,e.$message({type:"success",message:"添加功能成功"}),e.fetchNodeList(),e.menu=Object(o["a"])({},r),e.permission=Object(o["a"])({},l)})))}))},appendLevelOne:function(){var e=this;a["a"].saveLevelOne(this.menu).then((function(i){e.dialogFormVisible=!1,e.$message({type:"success",message:"添加一级菜单成功"}),e.fetchNodeList(),e.menu=Object(o["a"])({},r),e.permission=Object(o["a"])({},l)})).catch((function(i){e.dialogFormVisible=!1,e.$message({type:"error",message:"添加一级菜单失败"}),e.menu=Object(o["a"])({},r),e.permission=Object(o["a"])({},l)}))},append:function(){var e=this;this.$refs.menu.validate((function(i){i&&(e.menu.id?e.update(e.menu):0==e.menu.pid?e.appendLevelOne():e.appendLevelTwo())}))},update:function(e){var i=this;a["a"].update(e).then((function(e){i.dialogFormVisible=!1,i.$message({type:"success",message:"修改成功"}),i.fetchNodeList(),i.restData()}))},appendLevelTwo:function(){var e=this;a["a"].saveLevelOne(this.menu).then((function(i){e.dialogFormVisible=!1,e.$message({type:"success",message:"添加二级分类成功"}),e.fetchNodeList(),e.menu=Object(o["a"])({},r),e.permission=Object(o["a"])({},l)})).catch((function(i){e.dialogFormVisible=!1,e.$message({type:"error",message:"添加二级分类失败"}),e.menu=Object(o["a"])({},r),e.permission=Object(o["a"])({},l)}))},getById:function(e){this.dialogFormVisible=!0,this.menu=e},updateFunction:function(e){this.dialogPermissionVisible=!0,this.permission=e},restData:function(){this.dialogPermissionVisible=!1,this.dialogFormVisible=!1,this.menu=Object(o["a"])({},r),this.permission=Object(o["a"])({},l)}}},u=m,c=t("2877"),p=Object(c["a"])(u,s,n,!1,null,null,null);i["default"]=p.exports},a4fa:function(e,i,t){"use strict";var s=t("b775"),n="/admin/acl/permission";i["a"]={getNestedTreeList:function(){return Object(s["a"])({url:"".concat(n),method:"get"})},removeById:function(e){return Object(s["a"])({url:"".concat(n,"/remove/").concat(e),method:"delete"})},saveLevelOne:function(e){return Object(s["a"])({url:"".concat(n,"/save"),method:"post",data:e})},update:function(e){return Object(s["a"])({url:"".concat(n,"/update"),method:"put",data:e})},toAssign:function(e){return Object(s["a"])({url:"".concat(n,"/getPermission/").concat(e),method:"get"})},doAssign:function(e,i){return Object(s["a"])({url:"".concat(n,"/setPermission"),method:"post",params:{roleId:e,permissionIds:i}})}}}}]);